<style>
    .rcorners2 {
        width: 30px;
        height: 23px;
        background: #DFDFDF url('../images/backbutton.svg') no-repeat 0px -252px;
        cursor: pointer;
        position: absolute;
        margin: -10px 0px 0px -12px;
        border-radius: 15px;
        opacity: 0;
    }
</style>
<div ng-include src="'emailpreview.html'"></div>
<div ng-include src="'emaileditormindbodypopup.html'"></div>
<div ng-include src="'addlinkpopup.html'"></div>
<div class="bb-top-nav" ng-init="emailEditorInit()">
    <div class="bb-bar-left-wrap bb-one-third-flex-col" ng-init="redirectBaseURL()">
        <a href="baseemaileditor#/emailsubjects" class="bb-back-button"></a>
        <h3 class="bb-top-nav-title">Email Editor</h3>
    </div>
    <div class="bb-bar-center-wrap bb-one-third-flex-col">
        <div class="bb-step completed">Email Details</div>
        <div class="bb-step current">Design</div>
        <div class="bb-step upcoming">Send To</div>
        <div class="bb-step upcoming">Final Details</div>
    </div>
    <div class="bb-bar-right-wrap bb-one-third-flex-col">
        <!--<a href="dashboard"><div>Exit</div></a>-->
        <div class="bb-help-icon">help icon</div>
        <div ng-hide="isEmailSaveAction" class="email-editor-save-exit-button" id="saveToDraft" ng-click="saveToDraftOnClick(true)"  >Save as Draft and Exit</div> 
    </div>
</div>
<div class="bb-email-editor-wrap" >
    <div  class="email-editor-wrap">
        <div class="email-editor-top-buttons-wrap">
            <a class="bb-button bb-secondary-action-button" id="emailpreview" ng-click="emailPreviewOnClick()">Preview Email</a>
        </div>
        <div class="email-editor-content-wrap">
            <div  id ="defaultBlock" >
                <div class="editor_rightside ui-sortable" >
                    <div class="emailrender ui-sortable" id="tinymceEditorBody" ></div>
                </div>
            </div>
        </div>
        <div class="email-bottom-padding">Your Footer Will Be Added On Previewing and Sending</div>
        <div class="emailEditor-leftCol float-lt" style="">
            <div class="in-editor-footer-wrap" style="position: fixed; bottom: 6%;width: 75%;">
                <h3>Email Footer</h3>
                <p>Your email footer is the same on every email. You 
                    see the footer in this email by previewing your email. To edit
                    the footer click email footer settings.</p>
                <span class="reg-button gray-button" ng-click="editFooter()">Edit Email Footer</span>
            </div>
        </div>

        <div id="colpic" class="displayNone" style="width: 200px;height:200px;margin-top: -20px" >
            <p ng-repeat="color in  colorcode.colors"style="display: inline-block;width: 20px;height:20px;background-color: {{color}}"  ng-click="chengeTemplateColor(color)">
            </p>
        </div>
    </div>
    
    <div class="email-editor-right-col" ng-show="addBlockStyle === true">
        <div class="email-editor-tab-wrap">
            <div class="editor-col-tab">
                <div class="emailSideBar-tab" ng-class="{'emailSideBar-tab-active': emailTab.isSelected(1)}" id="blocktab" ng-init="showBlocks()" ng-click="emailTab.selectTab(1);showBlocks()">
                    Add Block
                </div>
            </div>
            <div class="editor-col-tab">
                <div class="emailSideBar-tab" ng-class="{'emailSideBar-tab-active': emailTab.isSelected(2)}" id="styletab" ng-init="showStyles('false')" ng-click="emailTab.selectTab(2);showStyles('true')">
                    Change Style
                </div>
            </div> 
        </div>
        <div class="r-col-editor-header-wrap" id="blockdivheader" ng-show="blockdivheader">Select a block to add:</div>
        <div class="r-col-editor-header-wrap" id="styledivheader" ng-show="styledivheader">Select a style for this block:</div>
        <div class="block-selection-divider"></div>
        <ul class="r-col-block-wrap" id="blockdiv" ng-show="emailTab.isSelected(1)">
            <li class="bb-clickable-slat" ng-class="{'editor-block-slat-selected': activeBlock === blocks.emailBlockId}" ng-repeat="blocks in blockLists" id="{{blocks.emailBlockId}}" ng-click="blockOnClick(blocks.emailBlockId)">
                <div id="blklist----{{blocks.emailBlockId}}" class="block-name">{{blocks.emailBlockName}}</div>                            
                <div class="editor-add-block-button hideBlockButton" ng-class="{'hideBlockButton': activeBlock !== blocks.emailBlockId}" ng-click="didChooseBlock(blocks)" >Add Block</div>
            </li>
        </ul>
        <ul class="r-col-block-wrap"  ng-show="emailTab.isSelected(2)">
            <li ng-repeat="styles in datalistsstyles.slice().reverse()" class="bb-clickable-slat" id="stylelistid{{styles.modelId}}" ng-click="addActive('stylelistid' + styles.modelId)">
                <img id="{{styles.modelId}}" class="img-responsive lookchooser5 ptr" src="/BrndBot/downloadImage?imageName={{styles.imageFileName}}&imageType=EMAIL_TEMPLATE_IMAGE&companyId=0" ng-click="addHTMLInEmailEditor(styles.modelId)" width="100%" />
            </li>
        </ul>
    </div>
    <div class="email-editor-right-col" ng-show="addBlockStyle === false">
        <div class="bb-email-image-pop-up-header">
            <a class="bb-button bb-default-action-button" ng-click="showImageUploadPopup()">Upload an Image</a>
        </div>
        <div class="imageGallery-inner-popup" style="display: none !important;">
            <div class="imageUpload-container">
                <div class="browse-button">
                    <input type="file"  hidden="" id="filesToUpload" custom-on-change="uploadFile"/>
                </div>
            </div>                     
        </div>
        <ul class="r-col-block-wrap">
            <li ng-repeat="images in datalists">
                <img id="{{images.companyImagesId}}" class="img-responsive lookchooser5 ptr" src="/BrndBot/downloadImage?imageType=GALLERY&imageName={{images.imageName}}&companyId={{currentCompanyId}}"  width="100%" ng-click="changeTemplateImage(images.companyImagesId)" />
            </li>
        </ul>
    </div>
    
    <!--option sliders-->
    <!--<div ng-include src="'editorimageslideout.html'"></div> 
    <div ng-include src="'editorbuttonslideout.html'"></div> -->
    
</div>
<span ng-init="getFooterDetails()">
    <div ng-include src="'emailfooterpopup.html'"></div> 
</span>
<div class="bb-bottom-cta-bar">
    <a class="bb-bottom-cta-continue-button" ng-class="{'bb-valid': emailEditorContinueButton}" ng-click="saveButtonOnClick()" >
        <div class="bb-bottom-cta-continue-button-text">Continue</div>
        <img class="bb-bottom-cta-continue-button-arrow" src="/BrndBot/images/continue-arrow.svg" />
    </a>
</div>
<div id="light" class="white_content closepopup">
    <a href = "javascript:void(0)" style="text-decoration:none;">
        <div id="slider-button" style="font-size:40px;text-align:center;z-index:1006;display:none;">
            <p style="margin-top:-7px;">
                <img src="../images/yourPlan.svg" height="25" width="25" /></p>
        </div>
    </a>
</div>
<script src="../js/utilities/drag-delete-template.js" type="text/javascript"></script>
