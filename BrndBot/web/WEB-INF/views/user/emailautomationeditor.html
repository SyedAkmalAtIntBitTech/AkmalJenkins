
<div  id="emailautomation"  ng-init="getEmailTemplates(false)" >
<div ng-include src="'addlinkpopup.html'"></div>
    <!--Email Preview-->
    <div id="fadeEmailAutomationPreview" class="center-pop-ups overlay-dark-bg" ng-show="emailPreviewPopup">


        <div class="bb-panel-styling bb-panel-email-automation-preview" > 
            <div class="bb-panel-header"> 
                <h2>Email Preview</h2>
                <a class=" closeemailpreview modal-pane-header-exit" href="" id="closePrev" ng-click="closeEmailPreviewPopup()">
                </a>
            </div>
            <!--inner-->
            <div class="email-automation-preview-col-desktop">
                <div class="emailAutomationPreviews col-1of1 fleft"> 
                    <div class="emailPreview-desktop-col  fleft">
                        <div class="emailPreview-headers">Desktop Preview</div>
                        <div class="content">  
                            <div id="dynamictable5" style="position: relative; width: 100%; border: none; overflow: scroll; height: 400px;background-color: rgb(255, 255, 255);" >

                            </div>                   
                        </div>
                        <!--                                <div class="desktopshow">
                                                            <iframe id='dynamictable' class="desktoppreview" src=''></iframe> 
                                                        </div>                        -->
                    </div>
                    <div class="emailPreview-mobile-col fleft">
                        <div class="emailPreview-headers">Mobile Preview</div>
                        <div class="iphoneshow img-responsive" id="mobpreview" style="display: block; height: 370px; width: 100%; margin-left: 6px; margin-top: 0px; border-color: transparent; background-color: rgb(255, 255, 255); background-size: contain; background-repeat: no-repeat;">
                            <div class="content">  
                                <div  id="dynamictable6" style="position: relative; width: 100%; height: 400px; overflow: scroll; border: none; background-color: rgb(255, 255, 255);">

                                </div>                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!--Email Editor View-->
    <div  id="emlautomeditorcontainer" class="bb-email-editor-wrap bb-email-auto-height" >
        <!--// tinymce editor-->
        <div  class="email-editor-wrap">
            <div class="email-editor-top-buttons-wrap">
                <div class="bb-button bb-secondary-action-button" id="emailpreview" ng-click="emailPreviewOnClick()" ng-show="automationEditor">Preview Email</div> 
            </div>
            <div class="email-editor-content-wrap">
                <div  id ="defaultBlock" >
                    <div class="editor_rightside ui-sortable">
                        <div class="emailrender ui-sortable" id="tinymceEditorBody">
                        </div>
                    </div>
                </div>
            </div>
             <div class="email-bottom-padding">Your Footer Will Be Added On Previewing and Sending</div>
            <div class="emailEditor-leftCol float-lt" style="">
                <div class="in-editor-footer-wrap" style="position: fixed; bottom: 6%;width: 75%;">
                    <h3>Email Footer</h3>
                    <p>Your email footer is the same on every email. You  
                       see the footer in this email by previewing your email. To edit
                        the footer click email footer settings.</p>
                    <span class="reg-button gray-button" ng-click="editFooter()">Edit Email Footer</span>
                </div>
            </div>

        </div>
        <!--......tinymce end..............-->
        <div class="email-editor-right-col" ng-show="addBlockStyle === true">
            <div class="email-editor-tab-wrap">
                <div class="editor-col-tab">
                    <div class="{{recurringtab}}" id="recurringtab"  ng-click="getEmailTemplates(true)">
                        Template 
                    </div>
                </div>
                <div class="editor-col-tab">
                    <div class="{{blocktab}}" id="blocktab"  ng-click="showBlocks()">
                        Add Block
                    </div>
                </div>
                <div class="editor-col-tab">
                    <div class="{{styletab}}" id="styletab" ng-init="showStyles('false')" ng-click="showStyles('true')">
                        Block Style
                    </div>
                </div> 
            </div>
            <div class="r-col-editor-wrap">
                <div class="r-col-editor-header-wrap" id="blockdivheader" ng-show="blockdivheader">Select a block to add:</div>
                <div class="r-col-editor-header-wrap" id="styledivheader" ng-show="styledivheader">Select a style for this block:</div>
                <div class="r-col-editor-header-wrap" id="recurringDivheader" ng-show="recurringDivheader">Select a Recurring template:</div>
                <div class="block-selection-divider"></div>
                <ul class="r-col-block-wrap" id="blockdiv" ng-show="blockdivheader">
                    <li class="bb-clickable-slat" ng-class="{'editor-block-slat-selected': activeBlock === blocks.emailBlockId}" ng-repeat="blocks in blockLists" id="{{blocks.emailBlockId}}" ng-click="blockOnClick(blocks.emailBlockId)">
                        <div id="blklist----{{blocks.emailBlockId}}" class="">{{blocks.emailBlockName}}</div>                            
                        <div class="editor-add-block-button hideBlockButton" ng-class="{'hideBlockButton': activeBlock !== blocks.emailBlockId}" ng-click="didChooseBlock(blocks)" >Add Block</div>
                    </li>
                </ul>
                <ul class="r-col-block-wrap"  ng-show="styledivheader">
                    <li ng-repeat="styles in datalistsstyles.slice().reverse()" class="style-slat" id="stylelistid{{styles.modelId}}" ng-click="addActive('stylelistid' + styles.modelId)">
                        <div class="block-name">
                            <img id="{{styles.modelId}}" class="img-responsive lookchooser5 ptr" src="/BrndBot/downloadImage?imageName={{styles.imageFileName}}&imageType=EMAIL_TEMPLATE_IMAGE&companyId=0" ng-click="addHTMLInEmailEditor(styles.modelId)" width="100%" />
                        </div>
                    </li>
                </ul>
                <ul class="r-col-block-wrap" ng-show="recurringDivheader">
                    <li class="bb-clickable-slat" ng-class="{'editor-block-slat-selected': activeBlock === email_template.template_id}" ng-repeat="email_template in recuring_email_templates" ng-click="recurringTemplateOnClick(email_template.template_id)">
                        <div id="recurringlist----{{email_template.template_id}}" class="">{{email_template.template_name}}</div>
                        <div class="editor-add-block-button hideBlockButton" ng-class="{'hideBlockButton': activeBlock !== email_template.template_id}" ng-click="showHTMLData(email_template.html_data, email_template.template_id)" >Change Template</div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="email-editor-right-col" ng-show="addBlockStyle === false">
            <div class="bb-email-image-pop-up-header">
                <a class="bb-button bb-default-action-button" ng-click="showImageUploadPopup()">Upload an Image</a>
            </div>
            <div class="imageGallery-inner-popup" style="display: none !important;">
                <div class="imageUpload-container">
                    <div class="browse-button">
                        <input type="file"  hidden="" id="filesToUpload" custom-on-change="uploadFile"/>
                    </div>
                </div>                     
            </div>
            <ul class="r-col-block-wrap">
                <li ng-repeat="images in datalists">
                    <img id="{{images.companyImagesId}}" class="img-responsive lookchooser5 ptr" src="/BrndBot/downloadImage?imageType=GALLERY&imageName={{images.imageName}}&companyId={{currentCompanyId}}"  width="100%" ng-click="changeTemplateImage(images.companyImagesId)" />
                </li>
            </ul>
        </div>
        <div class="r-col-editor-wrap" id="textdivheader" ng-show="textdivheader">
            <div class="textstyle">To add client name please use these options</div>
            <div class="textstyle">Ex: Hi &LT;clientFirstName&GT; </div>
            <div class="textstyle">Hi &LT;clientLastName&GT; </div>
            <div class="textstyle">Hi &LT;clientFullName&GT; </div>
        </div>
    </div>

</div>

<span ng-init="getFooterDetails()">
    <div ng-include src="'emailfooterpopup.html'"></div> 
</span>

<script src="../js/utilities/drag-delete-template.js" type="text/javascript"></script>